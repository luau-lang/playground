<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Luau Embed Test</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
    }
    h2 {
      color: #555;
      margin-top: 40px;
    }
    p {
      color: #666;
      line-height: 1.6;
    }
    .embed-wrapper {
      margin: 20px 0;
    }
    code {
      background: #e8e8e8;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 14px;
    }
    .note {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 6px;
      padding: 12px 16px;
      margin-bottom: 24px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>Luau Embed Component Test</h1>
  
  <div class="note">
    <strong>Local Testing:</strong> Using <code>base-url="http://localhost:4173/"</code> to point iframes to the local build.
    In production, omit this attribute to use <code>https://play.luau.org</code>.
  </div>
  
  <p>
    This page tests the <code>&lt;luau-embed&gt;</code> web component, which creates
    an iframe pointing to the Luau Playground with embed mode enabled.
  </p>

  <h2>Single File Example</h2>
  <p>A simple "Hello World" example:</p>
  <div class="embed-wrapper">
    <luau-embed height="300px" base-url="http://localhost:4173/">
      <luau-file name="main.luau">
-- Hello World in Luau
local function greet(name: string): string
    return `Hello, {name}!`
end

print(greet("World"))
print(greet("Luau"))
      </luau-file>
    </luau-embed>
  </div>

  <h2>Multi-File Example</h2>
  <p>An example with multiple files demonstrating <code>require</code>:</p>
  <div class="embed-wrapper">
    <luau-embed height="400px" base-url="http://localhost:4173/">
      <luau-file name="main.luau">
-- Main entry point
local Utils = require("./utils")
local Config = require("./config")

print(`Welcome to {Config.APP_NAME}!`)
print(`Version: {Config.VERSION}`)
print("")

local numbers = {1, 2, 3, 4, 5}
print(`Sum: {Utils.sum(numbers)}`)
print(`Average: {Utils.average(numbers)}`)
      </luau-file>
      <luau-file name="utils.luau">
-- Utility functions
local Utils = {}

function Utils.sum(numbers: {number}): number
    local total = 0
    for _, n in numbers do
        total += n
    end
    return total
end

function Utils.average(numbers: {number}): number
    if #numbers == 0 then
        return 0
    end
    return Utils.sum(numbers) / #numbers
end

return Utils
      </luau-file>
      <luau-file name="config.luau">
-- Configuration
return {
    APP_NAME = "Luau Demo",
    VERSION = "1.0.0",
}
      </luau-file>
    </luau-embed>
  </div>

  <h2>Dark Theme Example</h2>
  <p>Forcing dark theme via the <code>theme="dark"</code> attribute:</p>
  <div class="embed-wrapper">
    <luau-embed height="250px" theme="dark" base-url="http://localhost:4173/">
      <luau-file name="main.luau">
-- Type checking example
type Point = { x: number, y: number }

local function distance(a: Point, b: Point): number
    local dx = b.x - a.x
    local dy = b.y - a.y
    return math.sqrt(dx*dx + dy*dy)
end

local p1: Point = { x = 0, y = 0 }
local p2: Point = { x = 3, y = 4 }

print(`Distance: {distance(p1, p2)}`)
      </luau-file>
    </luau-embed>
  </div>

  <h2>Light Theme Example</h2>
  <p>Forcing light theme via the <code>theme="light"</code> attribute:</p>
  <div class="embed-wrapper">
    <luau-embed height="200px" theme="light" base-url="http://localhost:4173/">
      <luau-file name="main.luau">
-- Simple loop
for i = 1, 5 do
    print(`Iteration {i}`)
end
      </luau-file>
    </luau-embed>
  </div>

  <!-- Load the embed component -->
  <script type="module" src="./dist/embed/luau-embed.js"></script>
</body>
</html>
